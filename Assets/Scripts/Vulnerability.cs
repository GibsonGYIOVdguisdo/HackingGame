using System;
using UnityEngine;

public class Vulnerability
{
    private readonly string _name;
    private readonly string _description;

    private enum Type { 
        Malware, 
        Email,
    };

    public string Name
    {
        get
        {
            return _name;
        }
    }
    public string Description
    {
        get
        {
            return _description;
        }
    }

    public Vulnerability()
    {
        _name = GetRandomVulnerability();
        _description = DescribeVulnerability(_name);
    }

    public Vulnerability(string vulnerability)
    {
        if (!_name.Contains(vulnerability))
        {
            throw new ArgumentException("Vulnerability is not valid");
        }
        _name = vulnerability;
    }

    private static string GetRandomVulnerability()
    {
        var hacktypes = Enum.GetNames(typeof(Type));
        string randomHackType = hacktypes[UnityEngine.Random.Range(0, hacktypes.Length)];
        return randomHackType;
    }

    public static string GetRandomTypingText(string vulnerability)
    {
        string[] allTypingOptions = GetAllTypingOptions(vulnerability);
        return allTypingOptions[UnityEngine.Random.Range(0, allTypingOptions.Length)];
    }

    private static string DescribeVulnerability(string name)
    {
        return "Description of " + name;
    }

    private static string[] GetAllTypingOptions(string vulnerability)
    {
        string[] results = FileManager.ReadSeperatedValuesFromFile(vulnerability + "TypingOptions");
        return results;
    }
}
